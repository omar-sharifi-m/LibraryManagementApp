{% macro form_render(form) %}
    {% for field in form %}
        {% if field.type in ['CSRFTokenField', 'HiddenField'] %}
            {{ field }}
        {% else %}
            <div class="mb-5">
                {# ۱. نمایش لیبل #}
                {{ field.label(class="block text-sm font-bold text-gray-700 mb-2") }}
                {% if field.type == 'BooleanField' %}
                    <div class="flex items-center gap-2">
                        {{ field(class="w-4 h-4 text-indigo-600 border-gray-300 rounded") }}
                        <span class="text-sm text-gray-600">مرا به خاطر بسپار</span>
                    </div>
                {% else %}
                    {# اضافه کردن کلاس قرمز در صورت وجود خطا #}
                    {% set field_class = "w-full px-4 py-3 rounded-xl border outline-none transition " %}
                    {% if field.errors %}
                        {% set field_class = field_class + "border-red-500 focus:ring-2 focus:ring-red-200" %}
                    {% else %}
                        {% set field_class = field_class + "border-gray-200 focus:ring-2 focus:ring-indigo-500" %}
                    {% endif %}

                    {{ field(class=field_class, placeholder=field.label.text) }}
                {% endif %}

                {# ۳. نمایش پیام‌های خطا #}
                {% if field.errors %}
                    {% for error in field.errors %}
                        <p class="text-red-500 text-xs mt-1 font-medium">{{ error }}</p>
                    {% endfor %}
                {% endif %}
            </div>
        {% endif %}
    {% endfor %}

{% endmacro %}


{% macro adminSidebarItem(path,url,text) %}
    {% if path == url %}
        <a href="{{ url }}" class="block py-3 px-6 bg-indigo-800 border-r-4 border-white">{{ text }}</a>
    {% else %}
        <a href="{{ url }}" class="block py-3 px-6 hover:bg-indigo-800 transition">{{ text }}</a>
    {% endif %}
{% endmacro %}

{% macro input(type,label,name,args= "") %}
    <div>
        <label for="{{ name }}" class="block text-sm font-medium mb-1">{{ label }}</label>
        <input type="{{ type }}" {{ args }} id="{{ name }}" name="{{ name }}"
               class="w-full border rounded-lg px-3 py-2"
        >
    </div>
{% endmacro %}


{% macro dashboardNav(path,url,text,value) %}
    {% if path != url %}
        <a href="{{ url }}">
            <div class="bg-white p-6 rounded-3xl shadow-sm border border-gray-100">
                <p class="text-gray-500 text-sm">{{ text }}</p>
                <p class="text-3xl font-black mt-2 text-gray-800">{{value}}</p>
            </div>
        </a>
    {% else %}

        <a href="{{ url }}">
            <div class="bg-indigo-600 p-6 rounded-3xl text-white">
                <p class="opacity-80 text-sm">{{text}}</p>
                <p class="text-3xl font-black mt-2">{{value}}</p>
            </div>
        </a>
    {% endif %}


{% endmacro %}


{% macro textArea(label,name,args= "") %}
    <div>
        <label for="{{ name }}" class="block text-sm font-medium mb-1">{{ label }}</label>
        <textarea name="{{ name }}" {{ args }} id="{{ name }}" rows="3"
                  class="w-full border rounded-lg px-3 py-2"></textarea>
    </div>
{% endmacro %}

{% macro flush(request) %}

    {% set msg  = flash_context(request) %}
    {% if msg.get("flush") %}
        <script>
            Toastify({
                text: "{{ msg.get("flush") }}",
                duration: 3000,
                gravity: "top",
                position: "right",
                backgroundColor: "red",
            }).showToast();
        </script>
    {% endif %}
{% endmacro %}